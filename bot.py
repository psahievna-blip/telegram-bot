import telebot
from telebot import types
import os

TOKEN = "8565702453:AAGlfwo9QEkvKx8lkAD26RbDfOIsksEpf3U"
bot = telebot.TeleBot(TOKEN)

# =========================
# –•–†–ê–ù–ï–ù–ò–ï –Ø–ó–´–ö–ê –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø
# =========================
user_language = {}

# =========================
# –¢–ï–ö–°–¢–´
# =========================
TEXTS = {
    "ru": {
        "welcome": """üëã –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π Telegram-–±–æ—Ç –ê–∫—Å—É—Å–∫–æ–≥–æ –∫–æ–ª–ª–µ–¥–∂–∞ —á–µ—Ä–Ω–æ–π –º–µ—Ç–∞–ª–ª—É—Ä–≥–∏–∏!

–ó–¥–µ—Å—å –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ–ª—É—á–∏—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –ø–æ –ø—Ä–∏—ë–º—É –∏ –æ–±—É—á–µ–Ω–∏—é:

üìå –û–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—è–º–∏  
üìÑ –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —Å–ø–∏—Å–æ–∫ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤  
üè´ –ü–æ–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å –Ω–∞—à–∏–º –∫–æ–ª–ª–µ–¥–∂–µ–º  
üìû –°–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏ (–∫–æ–Ω—Ç–∞–∫—Ç—ã)  
üåê –ü–æ–¥–ø–∏—à–∏—Ç–µ—Å—å –Ω–∞ –Ω–∞—à–∏ —Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏  

–í—ã–±–µ—Ä–∏—Ç–µ –Ω—É–∂–Ω—ã–π —Ä–∞–∑–¥–µ–ª –Ω–∏–∂–µ üëá""",

        "menu_specialties": "üìö –°–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏",
        "menu_docs": "üìÑ –î–æ–∫—É–º–µ–Ω—Ç—ã",
        "menu_social": "üåê –°–æ—Ü—Å–µ—Ç–∏",
        "menu_contacts": "üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã",
        "menu_photos": "üè´ –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏",
        "menu_dorm": "üè° –û–±—â–µ–∂–∏—Ç–∏–µ",

        "docs_text": """üìÑ –î–æ–∫—É–º–µ–Ω—Ç—ã –¥–ª—è –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è:

1. –ê—Ç—Ç–µ—Å—Ç–∞—Ç –æ–± –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–∏  
2. –°–ø—Ä–∞–≤–∫–∞ –æ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–∏ –º–µ–¥–æ—Å–º–æ—Ç—Ä–∞ 075-–£  
3. –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ 3√ó4 ‚Äî 4 —à—Ç.  
4. –ó–∞—è–≤–ª–µ–Ω–∏–µ""",

        "contacts_text": """üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã:

–¢–µ–ª–µ—Ñ–æ–Ω / WhatsApp: 8-705-149-52-96  
üìç –ê–¥—Ä–µ—Å: –ê—É—ç–∑–æ–≤–∞ 6""",

        "dorm_text": """üè° –ö–û–ú–§–û–†–¢–ù–û–ï –ü–†–û–ñ–ò–í–ê–ù–ò–ï –í –û–ë–©–ï–ñ–ò–¢–ò–ò

–ê–∫—Å—É—Å–∫–∏–π –∫–æ–ª–ª–µ–¥–∂ —á–µ—Ä–Ω–æ–π –º–µ—Ç–∞–ª–ª—É—Ä–≥–∏–∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏–Ω–æ–≥–æ—Ä–æ–¥–Ω–∏–º —Å—Ç—É–¥–µ–Ω—Ç–∞–º –±–µ—Å–ø–ª–∞—Ç–Ω–æ–µ –ø—Ä–æ–∂–∏–≤–∞–Ω–∏–µ –≤ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º –æ–±—â–µ–∂–∏—Ç–∏–∏.

üåü –£—Å–ª–æ–≤–∏—è –ø—Ä–æ–∂–∏–≤–∞–Ω–∏—è:
‚Ä¢ –í–º–µ—Å—Ç–∏–º–æ—Å—Ç—å: 200 –º–µ—Å—Ç  
‚Ä¢ –ö–æ–º–Ω–∞—Ç—ã: –ø–æ 2 —á–µ–ª–æ–≤–µ–∫–∞  
‚Ä¢ –í –∫–∞–∂–¥–æ–π –∫–æ–º–Ω–∞—Ç–µ —Å–≤–æ–π —Å–∞–Ω—É–∑–µ–ª  
‚Ä¢ –ù–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–∂–µ –∫—É—Ö–Ω—è  
‚Ä¢ –ù–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–∂–µ –ø—Ä–∞—á–µ—á–Ω–∞—è  

–í–∞–∂–Ω–æ: –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –Ω–∞ –≥—Ä–∞–Ω—Ç–µ –ø—Ä–æ–∂–∏–≤–∞–Ω–∏–µ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–µ."""
    },

    "kz": {
        "welcome": """üëã –ê“õ—Å—É “õ–∞—Ä–∞ –º–µ—Ç–∞–ª–ª—É—Ä–≥–∏—è –∫–æ–ª–ª–µ–¥–∂—ñ–Ω—ñ“£ —Ä–µ—Å–º–∏ Telegram-–±–æ—Ç—ã–Ω–∞ “õ–æ—à –∫–µ–ª–¥—ñ“£—ñ–∑!

–ú“±–Ω–¥–∞ —Å—ñ–∑ “õ–∞–±—ã–ª–¥–∞—É –∂”ô–Ω–µ –æ“õ—É —Ç—É—Ä–∞–ª—ã ”©–∑–µ–∫—Ç—ñ –∞“õ–ø–∞—Ä–∞—Ç –∞–ª–∞ –∞–ª–∞—Å—ã–∑:

üìå –ú–∞–º–∞–Ω–¥—ã“õ—Ç–∞—Ä–º–µ–Ω —Ç–∞–Ω—ã—Å—ã“£—ã–∑  
üìÑ “ö–∞–∂–µ—Ç—Ç—ñ “õ“±–∂–∞—Ç—Ç–∞—Ä —Ç—ñ–∑—ñ–º—ñ–Ω “õ–∞—Ä–∞“£—ã–∑  
üè´ –ö–æ–ª–ª–µ–¥–∂–±–µ–Ω —Ç–∞–Ω—ã—Å—ã“£—ã–∑  
üìû –ë—ñ–∑–±–µ–Ω –±–∞–π–ª–∞–Ω—ã—Å—ã“£—ã–∑  
üåê ”ò–ª–µ—É–º–µ—Ç—Ç—ñ–∫ –∂–µ–ª—ñ–ª–µ—Ä–≥–µ –∂–∞–∑—ã–ª—ã“£—ã–∑  

–¢”©–º–µ–Ω–Ω–µ–Ω “õ–∞–∂–µ—Ç—Ç—ñ –±”©–ª—ñ–º–¥—ñ —Ç–∞“£–¥–∞“£—ã–∑ üëá""",

        "menu_specialties": "üìö –ú–∞–º–∞–Ω–¥—ã“õ—Ç–∞—Ä",
        "menu_docs": "üìÑ “ö“±–∂–∞—Ç—Ç–∞—Ä",
        "menu_social": "üåê ”ò–ª–µ—É–º–µ—Ç—Ç—ñ–∫ –∂–µ–ª—ñ–ª–µ—Ä",
        "menu_contacts": "üìû –ë–∞–π–ª–∞–Ω—ã—Å",
        "menu_photos": "üè´ –§–æ—Ç–æ—Å—É—Ä–µ—Ç—Ç–µ—Ä",
        "menu_dorm": "üè° –ñ–∞—Ç–∞“õ—Ö–∞–Ω–∞",

        "docs_text": """üìÑ –û“õ—É“ì–∞ —Ç“Ø—Å—É–≥–µ “õ–∞–∂–µ—Ç—Ç—ñ “õ“±–∂–∞—Ç—Ç–∞—Ä:

1. –ë—ñ–ª—ñ–º —Ç—É—Ä–∞–ª—ã –∞—Ç—Ç–µ—Å—Ç–∞—Ç  
2. 075-–£ –º–µ–¥–∏—Ü–∏–Ω–∞–ª—ã“õ –∞–Ω—ã“õ—Ç–∞–º–∞  
3. 3√ó4 —Ñ–æ—Ç–æ—Å—É—Ä–µ—Ç ‚Äî 4 –¥–∞–Ω–∞  
4. ”®—Ç—ñ–Ω—ñ—à""",

        "contacts_text": """üìû –ë–∞–π–ª–∞–Ω—ã—Å:

–¢–µ–ª–µ—Ñ–æ–Ω / WhatsApp: 8-705-149-52-96  
üìç –ú–µ–∫–µ–Ω–∂–∞–π: ”ò—É–µ–∑–æ–≤ 6""",

        "dorm_text": """üè° –ñ–ê–¢–ê“ö–•–ê–ù–ê–î–ê“í–´ –ñ–ê–ô–õ–´ ”®–ú–Ü–† –°“Æ–†–£

–ê“õ—Å—É “õ–∞—Ä–∞ –º–µ—Ç–∞–ª–ª—É—Ä–≥–∏—è –∫–æ–ª–ª–µ–¥–∂—ñ –±–∞—Å“õ–∞ “õ–∞–ª–∞–ª–∞—Ä–¥–∞–Ω –∫–µ–ª–≥–µ–Ω —Å—Ç—É–¥–µ–Ω—Ç—Ç–µ—Ä–≥–µ —Ç–µ–≥—ñ–Ω –∂–∞—Ç–∞“õ—Ö–∞–Ω–∞ “±—Å—ã–Ω–∞–¥—ã.

üåü –¢“±—Ä—É —à–∞—Ä—Ç—Ç–∞—Ä—ã:
‚Ä¢ –°—ã–π—ã–º–¥—ã–ª—ã“ì—ã: 200 –æ—Ä—ã–Ω  
‚Ä¢ –ë”©–ª–º–µ–ª–µ—Ä: 2 –æ—Ä—ã–Ω–¥—ã“õ  
‚Ä¢ ”ò—Ä –±”©–ª–º–µ–¥–µ –∂–µ–∫–µ —Å–∞–Ω–∏—Ç–∞—Ä–ª—ã“õ —Ç–æ—Ä–∞–ø  
‚Ä¢ ”ò—Ä “õ–∞–±–∞—Ç—Ç–∞ –∞—Å “Ø–π  
‚Ä¢ ”ò—Ä “õ–∞–±–∞—Ç—Ç–∞ –∫—ñ—Ä –∂—É–∞—Ç—ã–Ω –±”©–ª–º–µ  

–ú–∞“£—ã–∑–¥—ã: –≥—Ä–∞–Ω—Ç —Å—Ç—É–¥–µ–Ω—Ç—Ç–µ—Ä—ñ–Ω–µ —Ç“±—Ä—É —Ç–µ–≥—ñ–Ω."""
    }
}

# =========================
# –í–´–ë–û–† –Ø–ó–´–ö–ê
# =========================
@bot.message_handler(commands=['start'])
def start(message):
    markup = types.InlineKeyboardMarkup()
    markup.add(
        types.InlineKeyboardButton("üá∑üá∫ –†—É—Å—Å–∫–∏–π", callback_data="lang_ru"),
        types.InlineKeyboardButton("üá∞üáø “ö–∞–∑–∞“õ—à–∞", callback_data="lang_kz"),
    )
    bot.send_message(message.chat.id, "–í—ã–±–µ—Ä–∏—Ç–µ —è–∑—ã–∫ / –¢—ñ–ª–¥—ñ —Ç–∞“£–¥–∞“£—ã–∑:", reply_markup=markup)


@bot.callback_query_handler(func=lambda call: call.data.startswith("lang_"))
def set_language(call):
    chat_id = call.message.chat.id
    lang = call.data.split("_")[1]
    user_language[chat_id] = lang

    send_main_menu(chat_id)


# =========================
# –ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ
# =========================
def send_main_menu(chat_id):
    lang = user_language.get(chat_id, "ru")
    t = TEXTS[lang]

    markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
    markup.row(t["menu_specialties"], t["menu_docs"])
    markup.row(t["menu_social"], t["menu_contacts"])
    markup.row(t["menu_photos"], t["menu_dorm"])

    bot.send_message(chat_id, t["welcome"], reply_markup=markup)


# =========================
# –û–ë–†–ê–ë–û–¢–ß–ò–ö –ö–ù–û–ü–û–ö
# =========================
@bot.message_handler(func=lambda message: True)
def menu_handler(message):
    chat_id = message.chat.id
    lang = user_language.get(chat_id, "ru")
    t = TEXTS[lang]
    text = message.text

    # üìö –°–ü–ï–¶–ò–ê–õ–¨–ù–û–°–¢–ò
    if text == t["menu_specialties"]:
        bot.send_message(chat_id,
"""07150700 –ì—Ä—É–∑–æ–ø–æ–¥—ä–µ–º–Ω—ã–µ –º–∞—à–∏–Ω—ã –∏ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–µ—Ä—ã (2.10 –º–µ—Å.)
07151300 –ú–µ—Ç–∞–ª–ª—É—Ä–≥–∏—è —á–µ—Ä–Ω—ã—Ö –º–µ—Ç–∞–ª–ª–æ–≤ (3.10 –º–µ—Å.)
07150500 –°–≤–∞—Ä–æ—á–Ω–æ–µ –¥–µ–ª–æ (3.10 –º–µ—Å.)
07150300 –¢–æ–∫–∞—Ä–Ω–æ–µ –¥–µ–ª–æ (3.10 –º–µ—Å.)
07110400 –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ (3.10 –º–µ—Å.)
07140100 –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¢–ü (2.10 –º–µ—Å.)
07150600 –°–ª–µ—Å–∞—Ä–Ω–æ–µ –¥–µ–ª–æ (2.10 –º–µ—Å.)
07130100 –≠–ª–µ–∫—Ç—Ä–æ–æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ (2.10 –º–µ—Å.)
07130700 –¢–µ—Ö–æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ —ç–ª–µ–∫—Ç—Ä–æ–º–µ—Ö. –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è (3.10 –º–µ—Å.)
07150100 –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è –º–∞—à–∏–Ω–æ—Å—Ç—Ä–æ–µ–Ω–∏—è (3.10 –º–µ—Å.)""")

    # üìÑ –î–û–ö–£–ú–ï–ù–¢–´
    elif text == t["menu_docs"]:
        bot.send_message(chat_id, t["docs_text"])

    # üåê –°–û–¶–°–ï–¢–ò
    elif text == t["menu_social"]:
        markup = types.InlineKeyboardMarkup()
        markup.add(types.InlineKeyboardButton("üåê –°–∞–π—Ç", url="https://akchm.edu.kz/"))
        markup.add(types.InlineKeyboardButton("üì∏ Instagram", url="https://instagram.com/akchm.kz"))
        markup.add(types.InlineKeyboardButton("üìò Facebook", url="https://www.facebook.com/akchm.kz"))
        bot.send_message(chat_id, "–ù–∞—à–∏ —Å–æ—Ü—Å–µ—Ç–∏:", reply_markup=markup)

    # üìû –ö–û–ù–¢–ê–ö–¢–´
    elif text == t["menu_contacts"]:
        bot.send_message(chat_id, t["contacts_text"])

    # üè´ –§–û–¢–û –ö–û–õ–õ–ï–î–ñ–ê
    elif text == t["menu_photos"]:
        send_photos(chat_id, "photos")

    # üè° –û–ë–©–ï–ñ–ò–¢–ò–ï
    elif text == t["menu_dorm"]:
        bot.send_message(chat_id, t["dorm_text"])
        send_photos(chat_id, "photos_dorm")


# =========================
# –û–¢–ü–†–ê–í–ö–ê –§–û–¢–û
# =========================
def send_photos(chat_id, folder):
    if not os.path.exists(folder):
        bot.send_message(chat_id, "–ü–∞–ø–∫–∞ —Å —Ñ–æ—Ç–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞.")
        return

    files = os.listdir(folder)
    sent = 0

    for file in files:
        path = os.path.join(folder, file)
        if os.path.isfile(path):
            with open(path, "rb") as photo:
                bot.send_photo(chat_id, photo)
                sent += 1
                if sent >= 20:
                    break


# =========================
print("–ë–æ—Ç –∑–∞–ø—É—â–µ–Ω...")
bot.polling(none_stop=True)
